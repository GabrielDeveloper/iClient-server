language: node_js
node_js:
    - "5.11"
before_install:
    - sudo apt-get update
    - sudo apt-get install -y mongodb-org=3.2.10 mongodb-org-server=3.2.10 mongodb-org-shell=3.2.10 mongodb-org-mongos=3.2.10 mongodb-org-tools=3.2.10

services:
  - mongodb

before_script:
    - cd server/
    - npm install
    - mongo iclient_test --eval 'db.addUser("travis", "test");'

script:
    - npm run coverage
    - codecov

after_success:
  - bash <(curl -s https://codecov.io/bash)
